<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>

        *{
            margin: 0;
            padding: 0;
        }

        ul{
            list-style: none;
        }
        .wp{
            width: 80%;
            max-width: 1200px;
            margin: 0 auto;
        }

        .box1{
            height: 110px;
            background: orangered;
        }
        .box2{
            height: 300px;
            background: deepskyblue;
        }
        .box3{
            height: 1000px;
            background: brown;
        }
        .box4{
            height: 1000px;
            background: green;
        }

        .box5{
            height: 300px;
            background: black;
        }

        .m-sidebar {
            position: absolute;
            top: 500px;
            right: 0;

        }
        .m-sidebar li{
            margin-bottom: 10px;
        }
        .m-sidebar a {
            display: inline-block;
            width: 50px;
            height: 50px;
            line-height: 50px;
            background-color: orangered;
            font-size: 12px;
            color: #fff;
            text-align: center;
        }

        .m-sidebar .back{
            display: none;
        }
    </style>
</head>
<body>

<div class="m-sidebar">
    <ul>
        <li><a href="#">1</a></li>
        <li><a href="#">2</a></li>
        <li><a href="#">3</a></li>
        <li><a href="#">4</a></li>
        <li class="back"><a href="javascript:;">返回顶部</a></li>
    </ul>
</div>
<div class="wp">
    <div class="box1"></div>
    <div class="box2"></div>
    <div class="box3"></div>
    <div class="box4"></div>
    <div class="box5"></div>
</div>

<script src="js/jquery.js"></script>
<script>
    //得到.box3距离文档（即body）顶部的距离
    var h1=$('.box3').offset().top;
    var h2=$('.m-sidebar').offset().top;
    var h3=$('.box4').offset().top;

    $(window).on("scroll",function () {
        console.log(h2);
        console.log(h1);
        console.log(h3);
        if ($(document).scrollTop()>=h1) {
            $('.m-sidebar').css({
                position:"fixed",
                top:h2-h1+"px"
            });
        }else {
            $('.m-sidebar').css({
                position:"absolute",
                top:h2+"px"
            });
        }

        if ($(document).scrollTop()>=h3) {
            $('.m-sidebar .back').fadeIn();
        }else{
            $('.m-sidebar .back').fadeOut();
        }
    });

    $('.m-sidebar .back').on("click",function () {
        //通过jquery的animate函数设置页面的滚动距离
        //通过jquery的animate方法设置元素样式时，可以产生动画效果
        $('html,body').animate({
            scrollTop:0
        });
    });
</script>
</body>
</html>